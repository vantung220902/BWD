var isPercentage=!0;var ticketRd=document.querySelector('#giamve');var ticket=parseInt(ticketRd.innerText);var prizes=[{text:"Áo thun trắng tinh khôi",img:"./DoAnFile/lucky-wheel-master/images/vay.png",number:1,percentpage:0.02},{text:"Váy đen thui",img:"./DoAnFile/lucky-wheel-master/images/somi.png",number:1,percentpage:0.02},{text:"Mã giảm giá bất kỳ",img:"./DoAnFile/lucky-wheel-master/images/giamgias.png",number:1,percentpage:0.02},{text:"Thêm lượt",img:"./DoAnFile/lucky-wheel-master/images/anhche2.gif",number:1,percentpage:0.02},{text:"Chúc bạn may mắn lần sau",img:"./DoAnFile/lucky-wheel-master/images/anhche3.gif",percentpage:0.92},];document.addEventListener("DOMContentLoaded",function(){hcLuckywheel.init({id:"luckywheel",config:function(callback){callback&&callback(prizes)},mode:"both",getPrize:function(callback){var rand=randomIndex(prizes);var chances=rand;callback&&callback([rand,chances])},gotBack:function(data){if(data==null){Swal.fire('Chương trình kết thúc','Đã hết phần thưởng','error')}else if(data=='Chúc bạn may mắn lần sau'){Swal.fire('Bạn không trúng thưởng',data,'error')}else if(data=='Thêm lượt'){Swal.fire('Đã trúng',data,'error')
++ticket;ticketRd.innerText=ticket}else if(data=='Mã giảm giá bất kỳ'){let r=Math.random().toString(36).substring(7);Swal.fire('Đã trúng',r,'error')}else{Swal.fire('Đã trúng giải',data,'success')}}})},!1);function randomIndex(prizes){if(isPercentage){var counter=1;for(let i=0;i<prizes.length;i++){if(prizes[i].number==0){counter++}}
if(counter==prizes.length){return null}
--ticket;ticketRd.innerText=ticket;if(ticket<=0){document.querySelector('.hetluot').style.display='block'}else{document.querySelector('.hetluot').style.display='none'}
let rand=Math.random();let prizeIndex=null;console.log(rand);switch(!0){case rand<prizes[4].percentpage:prizeIndex=4;break;case rand<prizes[4].percentpage+prizes[3].percentpage:prizeIndex=3;break;case rand<prizes[4].percentpage+prizes[3].percentpage+prizes[2].percentpage:prizeIndex=2;break;case rand<prizes[4].percentpage+prizes[3].percentpage+prizes[2].percentpage+prizes[1].percentpage:prizeIndex=1;break;case rand<prizes[4].percentpage+prizes[3].percentpage+prizes[2].percentpage+prizes[1].percentpage+prizes[0].percentpage:prizeIndex=0;break}
if(prizes[prizeIndex].number!=0){prizes[prizeIndex].number=prizes[prizeIndex].number-1
return prizeIndex}else{return randomIndex(prizes)}}else{var counter=0;for(let i=0;i<prizes.length;i++){if(prizes[i].number==0){counter++}}
if(counter==prizes.length){return null}
var rand=(Math.random()*(prizes.length))>>>0;if(prizes[rand].number!=0){prizes[rand].number=prizes[rand].number-1
return rand}else{return randomIndex(prizes)}}}